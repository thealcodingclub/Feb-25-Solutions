# The Labrynth of Numbers

###### Made by [Abhishek](https://github.com/itsabhianant)

## Description

Given a grid where numbers are arranged in a spiral pattern, find the number at position (y, x) efficiently, even for large values up to 10⁹.

## Problem Statement
Deep within the archives of an ancient civilization, you discover a hidden chamber—The Labyrinth of Numbers. The walls are inscribed with a peculiar number spiral, an infinite grid where numbers grow outward in a distinct pattern.

Legend says that the key to unlocking the Chamber of Wisdom lies in decoding this spiral. To open the door, you must determine the number present at multiple given row (y) and column (x) positions in the grid.

Your task is to process q queries, each containing coordinates `(y, x)`, and return the corresponding number in the spiral.

---

## Input Format:
1. The first line contains a single integer `q` (`1 ≤ q ≤ 10^5`) — the number of queries.
2. The next q lines each contain two integers, `y` and `x` (`1 ≤ y, x ≤ 10^9`) — the row and column for the query.
---

## Constraints
1. `1 ≤ t ≤ 10^5`
2. `1 ≤ y,x ≤ 10^9`

---

## Output Format:

1. For each query, print a single integer — the number located at position `(y, x)` in the spiral.

---

## Test Cases

1. Input:
```
5
2 3
4 2
5 5
1 4
3 3
```

1. Output:
```
8
15
21
10
7
```

1. Explanation:
   
First line: `5`
- `5` is the number of queries

Second line: `2 3`
- `2` is the row number
- `3` is the column number

### Queries and Outputs

For each query `(row, column)` your task is to find what number will be present at that particular `(row, column)`.

Let's go through a few queries to understand the output:

1. **Query(2, 3):**
    - The element on `row 2 and column 3 is 8`
    - Output: `8`

2. **Query(4, 2):**
    - The element on `row 4 and column 2 is 15`
    - Output: `15`

3. **Query(5, 5):**
    - The element on `row 2 and column 5 is 21`
    - Output: `21`

4. **Query(1, 4):**
    - The element on `row 1 and column 4 is 10`
    - Output: `10`

5. **Query(3, 3):**
    - The element on `row 3 and column 3 is 7`
    - Output: `7`

---

1. Input:
```
3
1 1
100000 99999
6 6
```

1. Output:
```
1
9999800002
31
```

---

3. Input:
```
7
999999 1000000
7 3
3 3
10 10
2 2
1 10
8 1
```

3. Output:
```
999999000000
39
7
91
3
82
64
```
---

4. Input:
```
5
1000000 999999
999999 1000000
500000 500000
1000000000 1
1 1000000000
```

4. Output:
```
999999000002
999999000000
249999500001
1000000000000000000
999999998000000002
```

---

5. Input:
```
6
987654 123456
876543 654321
765432 345678
999999999 500000000
500000000 999999999
123456789 987654321
```

5. Output:
```
975460300261
768326532085
585885800947
999999996500000004
999999997500000002
975461057666514253
```
---

## Explanation:
The number spiral follows a specific pattern where numbers increase outward from `(1,1)`. The movement follows:

1. Rightward
2. Downward
3. Leftward
4. Upward
For example, the first few layers of the spiral look like this:
```
1   2   9  10  25  
4   3   8  11  24  
5   6   7  12  23  
16  15  14 13  22  
17  18  19 20  21  
```
The spiral can be generated by starting at the center and moving outward in a clockwise direction. The numbers.
From this pattern, we can make a mathematical formula to calculate the number at any given `(y, x)` position.

---

## Solution:
### Psuedocode:

**Input Reading**:
   - Read integer `t` (number of queries).
   - For each query, read integers `y` (row) and `x` (column).

**Number Calculation**:
   1. If `y >= x`:
       - If `y` is odd:
       ```
        result = y * y - (x - 1)
       ```
       - If `y` is even:
       ```
       result = (y - 1) * (y - 1) + x
       ```
   2. If `x > y`:
        - If `x` is odd:
        ```
        result = (x - 1) * (x - 1) + y
        ```
        - If `x` is even:
        ```
        result = x * x - (y - 1)
        ```
3. Return `result`

### Time Complexity:
- Each query is computed in `O(1)` time.
- For `q` queries, the total time complexity is `O(q)`.

### Space Complexity:
- `O(1)` (constant space)

---

### Implementation

#### C++ Implementation:

```cpp
#include <bits/stdc++.h> 
using namespace std;
typedef long long int ll;

// Function to determine the number at position (row, col) in the number spiral
void findNumberInSpiral() {
    ll row, col;
    cin >> row >> col;

    // Case when row and column are the same
    if (row == col) {
        cout << (row * col) - (row - 1);
        return;
    } 

    // Handling cases where row is even
    if (row % 2 == 0) {
        if (row > col) {  // If row number is greater
            ll baseValue = ((row + 1) * (row + 1)) - row;
            cout << baseValue - (col + row);
        } else if (col % 2 == 0) {  // If col is also even
            ll baseValue = (col * col) - (col - 1);
            cout << baseValue - (col - row);
        } else {  // If col is odd
            ll baseValue = ((col + 1) * (col + 1)) - col;
            cout << baseValue - (col + row);
        }
        return;
    } 

    // Handling cases where row is odd
    if (col < row) {  // If row number is greater
        ll baseValue = (row * row) - (row - 1);
        cout << baseValue - (row - col);
    } else if (col % 2 != 0) {  // If col is odd
        ll baseValue = ((col + 1) * (col + 1)) - col;
        cout << baseValue - (col + row);
    } else {  // If col is even and greater than row
        ll baseValue = (col * col) - (col - 1);
        cout << baseValue - (col - row);
    }
}

int main() {
    ll testCases;
    cin >> testCases;  // Read the number of test cases
    while (testCases--) {
        findNumberInSpiral();
        cout << endl;  // Print result for each test case
    }
    return 0;
}

```
